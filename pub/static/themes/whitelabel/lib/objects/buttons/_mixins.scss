@import "mixins.shapes";
@import "mixins.colors";
@import "mixins.shadows";

// Convenient button mixins

@mixin button-normal {
    @include button-binding("normal") { @content; }
}

@mixin button-emphasized {
    @include button-binding("emphasized") { @content; }
}


// Applies the style (normal|emphasized) and maintains the binding with the rel attribute
// Passed @content will be applied to all the buttons states
//
// @todo The binding should be explicit in the Theme partial
@mixin button-binding($button-style: null, $include-default: true) {

    @if $button-style == "normal" {

        @if $include-default == true {
            /* default */
            @include button-normal-navigational { @content };
        }

        &.navigational,
        &[rel~="edit"] {
            @include button-normal-navigational { @content };
        }
        &.mutating,
        &[rel~="promote"],
        &[rel~="save_resource"],
        &[rel~="create_resource"] {
            @include button-normal-mutating { @content };
        }
        &.positive {
            @include button-normal-positive { @content };
        }
        &.warning,
        &[rel~="demote"] {
            @include button-normal-warning { @content };
        }
        &.destructive,
        &[rel~="delete"] {
            @include button-normal-destructive { @content };
        }
    } @else if $button-style == "emphasized" {

        @if $include-default == true {
            /* default */
            @include button-emphasized-navigational { @content };
        }

        &.navigational,
        &[rel~="edit"] {
            @include button-emphasized-navigational { @content };
        }
        &.mutating,
        &[rel~="promote"],
        &[rel~="save_resource"],
        &[rel~="create_resource"] {
            @include button-emphasized-mutating { @content };
        }
        &.positive {
            @include button-emphasized-positive { @content };
        }
        &.warning,
        &[rel~="demote"] {
            @include button-emphasized-warning { @content };
        }
        &.destructive,
        &[rel~="delete"] {
            @include button-emphasized-destructive { @content };
        }
    } @else {
        @if $include-default == true {
            /* Default style for general/unspecified activities */
            @include button-normal-navigational { @content };
        }

        &.normal { @include button-normal-navigational { @content }; }
        &.emphasized { @include button-emphasized-navigational { @content }; }

        &.navigational,
        &[rel~="edit"] {
            &.normal { @include button-normal-navigational { @content }; }
            &.emphasized { @include button-emphasized-navigational { @content }; }
        }
        &.mutating,
        &[rel~="promote"],
        &[rel~="save_resource"],
        &[rel~="create_resource"] {
            &.normal { @include button-normal-mutating { @content }; }
            &.emphasized { @include button-emphasized-mutating { @content }; }
        }
        &.positive {
            &.normal { @include button-normal-positive { @content }; }
            &.emphasized { @include button-emphasized-positive { @content }; }
        }
        &.warning,
        &[rel~="demote"] {
            &.normal { @include button-normal-warning { @content }; }
            &.emphasized { @include button-emphasized-warning { @content }; }
        }
        &.destructive,
        &[rel~="delete"] {
            &.normal { @include button-normal-destructive { @content }; }
            &.emphasized { @include button-emphasized-destructive { @content }; }
        }
    }
}

// Alter a button in all its states, without redefining the whole styling
@mixin button-states() {
    &,
    &:hover,
    &:focus,
    &:active,
    &:disabled, &.disabled {
        @content;
    }
}