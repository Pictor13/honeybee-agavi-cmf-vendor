.selectize-control {
    $p: 3px;
    .selectize-input {
        @include input-textual-default();
        padding: $p 0 0 $p;

        .item,
        input {
            display: inline-block;
        }

        .remove {
            display: inline-block;
            width: $base-spacing;
            text-align: center;
            padding-left: 0.5 * $base-spacing;
            text-decoration: none;
            font-family: entypo;
            color: color(text-primary);
        }
    }

    // Multi selectize (Multiple choice select & Text-List)
    select[multiple] ~ & {
        .selectize-input.selectize-input {
            .item {
                @include button-shape-emphasized-navigational-default;
                @include button-colors-emphasized-navigational-default;
                margin: 0 $p $p 0;
                line-height: 1em;
            }
        }
    }

    // Single selectize (Single choice select)
    select:not([multiple]) ~ & {
        .selectize-input.selectize-input {
            padding: 0;

            .item {
                @include input-textual-shape-default;
                line-height: normal;
                text-align: left;
                margin: 0;

                background-color: color(transparent);
                border-color: color(transparent);
                outline-color: color(transparent);
            }
        }
    }

    .selectize-input.selectize-input {
        // new-item input caret
        > input {
            @include strip-box;
            @include strip-background;
            box-sizing: content-box;

            // same spacing as .item
            padding-top: $buttons-base-padding;
            padding-bottom: $buttons-base-padding;
            border: 1px solid color(transparent);
            line-height: normal;
            margin: 0 $p $p 0;
        }

        // states
        &.invalid { @include input-textual-colors-invalid; }
        &.disabled {
            @include input-textual-colors-disabled;
            .item { color: inherit; }
        }
        &.focus { @include input-textual-colors-focus; }
    }

    .selectize-dropdown {
        @include zindex(popover);
        margin-top: $p;
        margin-bottom: 0;
        box-shadow: 0 2px 5px rgba(color(black), 0.1);

        // prevent expanding the parent and keep overlaid
        position: absolute;
        top: 100%;

        .create,
        .option {
            display: block;
            padding: 0.5em 1em;
            text-decoration: none;
            background-color: color(background-blank);
        }

        .active,
        .option:hover {
            background-color: color(lightgrey1);
        }
    }

    .selectize-dropdown-content {
        max-height: 200px;
        overflow-y: auto;

        border: 1px solid color(grey1);
    }
}

// single-choice select
.input-choice {
    .selectize-input.selectize-input {
        // hide caret
        > input { @include visuallyhidden; }

        // maintain minimum height (of line-height + padding) when empty and without caret
        &.not-full {
            overflow: auto; // create block formatting context
            &:after {
                content: '\00a0';
                float: right;
                padding: $input-padding;
            }

            // fix flickering issue (Selectize append .dropdown-active for some milliseconds when focused)
            & ~ .selectize-dropdown { margin-left: -9999px; }
        }
    }

    select:not([multiple]) ~ .selectize-control {
        .item {
            // icon
            background-image: url(binaries/icons/chevron-down.svg);
            background-size: auto 80%;
            background-repeat: no-repeat;
            background-origin: content-box;
            background-position: right 50%;
        }
    }
}
