<?php

namespace {{ vendor }}\{{ package }}\Migration\Elasticsearch;

use Honeybee\Infrastructure\Migration\ElasticsearchMigration;
use Honeybee\Infrastructure\Migration\MigrationTargetInterface;
use Honeybee\Infrastructure\Migration\MigrationInterface;

class Migration_{{ timestamp }}_Create{{ resource }}_{{ variant }} extends ElasticsearchMigration
{
    protected function up(MigrationTargetInterface $migration_target)
    {
        $this->updateMappings($migration_target);
    }

    protected function down(MigrationTargetInterface $migration_target)
    {
    }

    public function getDescription($direction = MigrationInterface::MIGRATE_UP)
    {
        if ($direction === MigrationInterface::MIGRATE_UP) {
            return 'Will create the Elasticsearch mapping for {{ resource }} {{ variant }} in the {{ vendor }}_{{ package }} context.';
        }
    }

    public function isReversible()
    {
        return false;
    }

    protected function getIndexSettingsPath(MigrationTargetInterface $migration_target)
    {
    }

    protected function getTypeMappingPaths(MigrationTargetInterface $migration_target)
    {
        return [
            '{{ vendor_prefix }}-{{ package_prefix }}-{{ resource_prefix }}-{{ variant_prefix }}' => __DIR__ . DIRECTORY_SEPARATOR . '{{ resource_prefix }}-{{ variant_prefix }}-{{ timestamp }}-mapping.json'
        ];
    }
}
