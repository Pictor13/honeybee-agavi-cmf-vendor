<?xml version="1.0" encoding="utf-8" ?>
<type_schema namespace="Honeybee\SystemAccount\User\Projection\Standard"
    xmlns:xi="http://www.w3.org/2001/XInclude"
    xmlns="http://berlinonline.net/trellis/1.0/schema">
    <type_definition name="User">
        <implementor>\Honeybee\Projection\ProjectionType</implementor>
        <entity_implementor>\Honeybee\Projection\Projection</entity_implementor>
        <description>
            Defines the (normalized) strucuture of a default user projection.
        </description>
        <options>
            <option name="vendor">Honeybee</option>
            <option name="package">SystemAccount</option>
            <option name="is_hierarchical">false</option>
        </options>
        <!-- attribute definitions -->
        <xi:include href="../aggregate_root.xml" xpointer="xmlns(dt=http://berlinonline.net/trellis/1.0/schema)
            xpointer(/dt:type_schema/dt:type_definition/dt:attributes)">
        </xi:include>
    </type_definition>
    <!-- embed definitions -->
    <embed_definitions>
        <embed_definition name="Comment">
            <implementor>\Honeybee\EntityType</implementor>
            <entity_implementor>\Honeybee\Entity</entity_implementor>
            <attributes>
                <attribute name="title" type="text">
                    <description>title of a comment</description>
                    <option name="max_length">110</option>
                    <option name="min_length">1</option>
                    <option name="mandatory">true</option>
                </attribute>
                <attribute name="text" type="textarea">
                    <description>actual comment text</description>
                    <option name="max_length">10000</option>
                </attribute>
            </attributes>
        </embed_definition>
    </embed_definitions>
    <!-- reference (embed) definitions -->
    <reference_definitions>
        <reference_definition name="Friend">
            <implementor>\Honeybee\Projection\ReferencedEntityType</implementor>
            <entity_implementor>\Honeybee\Projection\ReferencedEntity</entity_implementor>
            <option name="referenced_type">\Honeybee\SystemAccount\User\Projection\Standard\UserType</option>
            <option name="identifying_attribute">identifier</option>
            <attributes>
                <attribute name="username" type="text">
                    <option name="mirrored">true</option>
                </attribute>
                <attribute name="firstname" type="text">
                    <option name="mirrored">true</option>
                </attribute>
                <attribute name="lastname" type="text">
                    <option name="mirrored">true</option>
                </attribute>
            </attributes>
        </reference_definition>
    </reference_definitions>
</type_schema>
