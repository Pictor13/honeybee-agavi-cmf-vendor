{%- block field -%} {# this block exists for whitespace control #}
{%- set errors = errors | default([]) -%}
{%- set input_help = translations.input_help | default('') -%}
{%- set input_hint = translations.input_hint | default('') -%}
{%- set input_focus_hint = translations.input_focus_hint | default('') -%}

<div
    class="hb-field hb-field__entity-reference-list {{ css }}" data-jsb="{{ widget_options|json_encode }}"
    data-hb-field-name="{{ field_name }}" {% for attr, val in html_attributes %} {{ attr }}="{{ val }}" {% endfor %}>
    <div class="hb-field__content">
        {% if options.hide_attribute_label is not defined or not options.hide_attribute_label %}
        <div class="hb-field__label">
            <label for="{{ field_id }}" class="{#mandatory#}">
                {{ _(field_name~'.field_name', translation_domain) }}
            </label>
        </div>
        {% endif %}
        <div class="hb-embed-type-selector visuallyhidden">
            {{ rendered_embed_selector|raw }}
        </div>
        <div class="hb-autocomplete">
            <input type="text" id="{{ field_id }}" {{ readonly }} {{ disabled }} {{ required }} {{ pattern|raw }}
        placeholder="{{ _("autocomplete", translation_domain) }}" />
        </div>
    </div>
    <div class="hb-field__value">
        <ul class="errors">
            {%- block field_errors  -%}
                {%- for error in errors -%}
                    <li class="error">{{error}}</li>
                {%- endfor -%}
            {%- endblock  -%}
        </ul>
        {% if input_help %}
            <div class="input_help">{{ input_help|raw }}</div>
        {% endif %}
        {% if input_hint %}
            <div class="input_hint">{{ input_hint|raw }}</div>
        {% endif %}
        {% if input_focus_hint %}
            <div class="input_hint focus">{{ input_focus_hint|raw }}</div>
        {% endif %}
        <input type="hidden" name="{{ grouped_field_name }}" value="" />
        <ul class="hb-entity-list {% if options.hide_entity_list is defined and options.hide_entity_list %}visuallyhidden{% endif %}">
        {%- for rendered_entity in rendered_entities -%}
            {{- rendered_entity|raw -}}
        {%- endfor -%}
        </ul>
        <ul class="hb-entity-list hb-entity-templates {% if inline_mode %}visuallyhidden{% endif %}" data-fpf-ignore>
        {%- for rendered_type_tpl in rendered_type_templates -%}
            {{- rendered_type_tpl|raw -}}
        {%- endfor -%}
        </ul>
    </div>
    <div class="hb-field__extra">
    </div>
</div>
{%- endblock field -%}
