<?php

use Honeybee\Projection\ProjectionTypeMap;
use Workflux\Builder\XmlStateMachineBuilder;

$projection_type_map = new ProjectionTypeMap;
{% for entity_key, meta_data in entity_type_map %}
$projection_type_map->setItem(
    '{{ entity_key }}',
    new {{ meta_data.implementor }}(
        (new XmlStateMachineBuilder([
            'name' => '{{ meta_data.workflow.name }}',
            'state_machine_definition' => '{{ meta_data.workflow.file }}'
        ]))->build()
    )
);
{% endfor %}

return $projection_type_map;
